/*!
 * ion-autocomplete 0.0.1
 * Copyright 2015 Danny Povolotski 
 * https://github.com/guylabs/ion-autocomplete
 */
!function(){"use strict";angular.module("ion-autocomplete",[]).directive("ionAutocomplete",["$ionicTemplateLoader","$ionicBackdrop","$rootScope","$document",function(a,b,c,d){return{require:"?ngModel",restrict:"E",template:'<input type="text" readonly="readonly" class="ion-autocomplete" autocomplete="off">',replace:!0,scope:{itemsMethod:"&",itemValueKey:"@",itemViewValueKey:"@"},link:function(c,e,f,g){if(g){var h="";f.placeholder&&(h=f.placeholder,e.attr("placeholder",f.placeholder));var i="Cancel";f.cancelLabel&&(i=f.cancelLabel),c.items=[],c.searchQuery="",c.getItemValue=function(a,b){var c;return c=angular.isObject(a)?a[b]:a};var j=['<div class="ion-autocomplete-container">','<div class="bar bar-header item-input-inset">','<label class="item-input-wrapper">','<i class="icon ion-ios7-search placeholder-icon"></i>','<input type="search" class="ion-autocomplete-search" ng-model="searchQuery" placeholder="'+h+'"/>',"</label>",'<button class="ion-autocomplete-cancel button button-clear">',i,"</button>","</div>",'<ion-content class="has-header has-header">',"<ion-list>",'<ion-item ng-repeat="item in items" type="item-text-wrap" ng-click="selectItem(item)">',"{{getItemValue(item, itemViewValueKey)}}","</ion-item>","</ion-list>","</ion-content>","</div>"].join("");a.compile({template:j,scope:c,appendTo:d[0].body}).then(function(a){var c=angular.element(a.element.find("input"));a.scope.selectItem=function(c){a.scope.items=[],a.scope.searchQuery="",g.$setViewValue(c),g.$render(),a.element.css("display","none"),b.release()},a.scope.$watch("searchQuery",function(b){""==b&&(a.scope.items=[]),b&&angular.isFunction(a.scope.itemsMethod)&&(a.scope.items=a.scope.itemsMethod({query:b}))});var d=function(d){d.preventDefault(),d.stopPropagation(),b.retain(),a.element.css("display","block"),c[0].focus(),setTimeout(function(){c[0].focus()},0)};e.bind("click",d),e.bind("touchend",d),a.element.find("button").bind("click",function(){a.scope.searchQuery="",b.release(),a.element.css("display","none")})}),g.$render=function(){var a=c.getItemValue(g.$viewValue,c.itemViewValueKey);e.val(a)},g.$formatters.unshift(function(a){var b=c.getItemValue(a,c.itemViewValueKey);return b}),g.$parsers.unshift(function(a){var b=c.getItemValue(a,c.itemValueKey);return b})}}}}])}();